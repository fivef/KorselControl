<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Korsel ATTiny2313: /home/steffen/Dropbox/Bachelorarbeit/Programmierung/Korsel_attiny2313/src/Korsel_BT.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<h1>/home/steffen/Dropbox/Bachelorarbeit/Programmierung/Korsel_attiny2313/src/Korsel_BT.c File Reference</h1>  </div>
</div>
<div class="contents">
<code>#include &lt;avr/io.h&gt;</code><br/>
<code>#include &lt;avr/interrupt.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="v24__commands_8h_source.html">v24_commands.h</a>&quot;</code><br/>
<code>#include &lt;util/delay.h&gt;</code><br/>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structV24Command.html">V24Command</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Command struct consisting of header and data.  <a href="structV24Command.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Korsel__BT_8c.html#a43bafb28b29491ec7f871319b5a3b2f8">F_CPU</a>&nbsp;&nbsp;&nbsp;4000000UL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Define CPU frequency.  <a href="#a43bafb28b29491ec7f871319b5a3b2f8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Korsel__BT_8c.html#ab54b68a1ee096155399ca2ee8bf5362e">USART_BAUD_RATE</a>&nbsp;&nbsp;&nbsp;9600</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Debug Mode.  <a href="#ab54b68a1ee096155399ca2ee8bf5362e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Korsel__BT_8c.html#af5d18045203a2499a4844f47cf2e193e">V24_UBRR</a>&nbsp;&nbsp;&nbsp;(F_CPU/(USART_BAUD_RATE*8L)-1)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculate and define UBRR.  <a href="#af5d18045203a2499a4844f47cf2e193e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Korsel__BT_8c.html#a73babaa7db68fbffea1acf6d865f435c">PWM_motor_left</a>&nbsp;&nbsp;&nbsp;OCR1A</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Korsel__BT_8c.html#a1d4a544af2c321ed1a83ee76e0db2cee">PWM_motor_right</a>&nbsp;&nbsp;&nbsp;OCR1B</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Korsel__BT_8c.html#a85de374aecd3b7aa7daf986cbecd51ad">motor_right_direction</a>&nbsp;&nbsp;&nbsp;PB1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Korsel__BT_8c.html#ac47b3b9c3080677199ad04e2abe3bbe0">motor_left_direction</a>&nbsp;&nbsp;&nbsp;PB2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Korsel__BT_8c.html#a95855eaf9cee62de5402f124b1b8a27b">RXD</a>&nbsp;&nbsp;&nbsp;PD0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Korsel__BT_8c.html#a0466ccb605cb0395fb03b72f476ec855">TXD</a>&nbsp;&nbsp;&nbsp;PD1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Korsel__BT_8c.html#a9a143588e075c0e3fc8131b7adab944c">photo_sensor</a>&nbsp;&nbsp;&nbsp;PD2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Korsel__BT_8c.html#ae4b82b8253877ff87a7583a662b8a85e">button_top</a>&nbsp;&nbsp;&nbsp;PD3</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Korsel__BT_8c.html#a812b344ccfd3d1614fb5aef444c1ea8e">button_left</a>&nbsp;&nbsp;&nbsp;PD4</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Korsel__BT_8c.html#a6596487ab05058eb9e5c0a5a7308d6c6">button_right</a>&nbsp;&nbsp;&nbsp;PD5</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Korsel__BT_8c.html#adfc226666716d4b58fc8488a85ad1983">button_middle</a>&nbsp;&nbsp;&nbsp;PD6</td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structV24Command.html">V24Command</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Korsel__BT_8c.html#ae89754a89c35713573eb2a2124fc4699">V24COMMAND</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Command struct consisting of header and data.  <a href="#ae89754a89c35713573eb2a2124fc4699"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Korsel__BT_8c.html#a0a7500cb71e3070b5eefb6c66b4b0ede">init_io</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">initialize IO ports  <a href="#a0a7500cb71e3070b5eefb6c66b4b0ede"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Korsel__BT_8c.html#a341d33c536d663703208ab568f7d1e0e">delay</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">delay of 100 ms  <a href="#a341d33c536d663703208ab568f7d1e0e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Korsel__BT_8c.html#ab742228d6d04b513d540ef5278e514f5">pwm</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize motor outputs as PWM (pulse width modulation).  <a href="#ab742228d6d04b513d540ef5278e514f5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Korsel__BT_8c.html#a2d6dfeece07c24153617ed94e3c41366">setup_interrupt</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize interrupts.  <a href="#a2d6dfeece07c24153617ed94e3c41366"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Korsel__BT_8c.html#af77d0bef7a9606d372dc7d621f3bce72">USART_Init</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize USART for serial communication.  <a href="#af77d0bef7a9606d372dc7d621f3bce72"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Korsel__BT_8c.html#ab8c416106cf1aff4ccdb3da4860fc179">USART_Transmit</a> (unsigned char data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Transmit a char on USART.  <a href="#ab8c416106cf1aff4ccdb3da4860fc179"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Korsel__BT_8c.html#a5dd3a8989f2fe0688e6690705d753f0e">USART_Transmit_Command</a> (<a class="el" href="structV24Command.html">V24COMMAND</a> *command)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Transmit a package consisting of a header and a value on USART.  <a href="#a5dd3a8989f2fe0688e6690705d753f0e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Korsel__BT_8c.html#aaad9fc771fb8f4348cd2f2a11e0399e9">Stop_Motor</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">If a contact button is pressed this method is called Resets motor speed to 0 and sends a "button pressed" command.  <a href="#aaad9fc771fb8f4348cd2f2a11e0399e9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Korsel__BT_8c.html#afea150fcd685610cb9f7672fce361e53">ISR</a> (INT0_vect)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ISR for photo sensor.  <a href="#afea150fcd685610cb9f7672fce361e53"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Korsel__BT_8c.html#a09ce999e15ad60b8a3f07d08af1946f9">ISR</a> (USART_RX_vect)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ISR for USART receive.  <a href="#a09ce999e15ad60b8a3f07d08af1946f9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Korsel__BT_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Main function.  <a href="#a840291bc02cba5474a4cb46a9b9566fe"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Korsel__BT_8c.html#a7432312cb69c802bd3e59006f0325c50">LEFT_MOTOR_SPEED_FORWARD_headerDetected</a> = false</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">true if last package received was the protocol header LEFT_MOTOR_SPEED_FORWARD  <a href="#a7432312cb69c802bd3e59006f0325c50"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Korsel__BT_8c.html#ad28d914a812dcb1f811412562d752698">LEFT_MOTOR_SPEED_BACKWARD_headerDetected</a> = false</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">true if last package received was the protocol header LEFT_MOTOR_SPEED_BACKWARD  <a href="#ad28d914a812dcb1f811412562d752698"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Korsel__BT_8c.html#a6dc3e377f49c2dea6f0f3e82020a798d">RIGHT_MOTOR_SPEED_FORWARD_headerDetected</a> = false</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">true if last package received was the protocol header RIGHT_MOTOR_SPEED_FORWARD  <a href="#a6dc3e377f49c2dea6f0f3e82020a798d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="Korsel__BT_8c.html#a971bcbb01204fee2d69c098b337f2da7">RIGHT_MOTOR_SPEED_BACKWARD_headerDetected</a> = false</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">true if last package received was the protocol header RIGHT_MOTOR_SPEED_BACKWARD  <a href="#a971bcbb01204fee2d69c098b337f2da7"></a><br/></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a812b344ccfd3d1614fb5aef444c1ea8e"></a><!-- doxytag: member="Korsel_BT.c::button_left" ref="a812b344ccfd3d1614fb5aef444c1ea8e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define button_left&nbsp;&nbsp;&nbsp;PD4</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="adfc226666716d4b58fc8488a85ad1983"></a><!-- doxytag: member="Korsel_BT.c::button_middle" ref="adfc226666716d4b58fc8488a85ad1983" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define button_middle&nbsp;&nbsp;&nbsp;PD6</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a6596487ab05058eb9e5c0a5a7308d6c6"></a><!-- doxytag: member="Korsel_BT.c::button_right" ref="a6596487ab05058eb9e5c0a5a7308d6c6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define button_right&nbsp;&nbsp;&nbsp;PD5</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae4b82b8253877ff87a7583a662b8a85e"></a><!-- doxytag: member="Korsel_BT.c::button_top" ref="ae4b82b8253877ff87a7583a662b8a85e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define button_top&nbsp;&nbsp;&nbsp;PD3</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a43bafb28b29491ec7f871319b5a3b2f8"></a><!-- doxytag: member="Korsel_BT.c::F_CPU" ref="a43bafb28b29491ec7f871319b5a3b2f8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define F_CPU&nbsp;&nbsp;&nbsp;4000000UL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Define CPU frequency. </p>

</div>
</div>
<a class="anchor" id="ac47b3b9c3080677199ad04e2abe3bbe0"></a><!-- doxytag: member="Korsel_BT.c::motor_left_direction" ref="ac47b3b9c3080677199ad04e2abe3bbe0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define motor_left_direction&nbsp;&nbsp;&nbsp;PB2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a85de374aecd3b7aa7daf986cbecd51ad"></a><!-- doxytag: member="Korsel_BT.c::motor_right_direction" ref="a85de374aecd3b7aa7daf986cbecd51ad" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define motor_right_direction&nbsp;&nbsp;&nbsp;PB1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a9a143588e075c0e3fc8131b7adab944c"></a><!-- doxytag: member="Korsel_BT.c::photo_sensor" ref="a9a143588e075c0e3fc8131b7adab944c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define photo_sensor&nbsp;&nbsp;&nbsp;PD2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a73babaa7db68fbffea1acf6d865f435c"></a><!-- doxytag: member="Korsel_BT.c::PWM_motor_left" ref="a73babaa7db68fbffea1acf6d865f435c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PWM_motor_left&nbsp;&nbsp;&nbsp;OCR1A</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1d4a544af2c321ed1a83ee76e0db2cee"></a><!-- doxytag: member="Korsel_BT.c::PWM_motor_right" ref="a1d4a544af2c321ed1a83ee76e0db2cee" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PWM_motor_right&nbsp;&nbsp;&nbsp;OCR1B</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a95855eaf9cee62de5402f124b1b8a27b"></a><!-- doxytag: member="Korsel_BT.c::RXD" ref="a95855eaf9cee62de5402f124b1b8a27b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RXD&nbsp;&nbsp;&nbsp;PD0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a0466ccb605cb0395fb03b72f476ec855"></a><!-- doxytag: member="Korsel_BT.c::TXD" ref="a0466ccb605cb0395fb03b72f476ec855" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TXD&nbsp;&nbsp;&nbsp;PD1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab54b68a1ee096155399ca2ee8bf5362e"></a><!-- doxytag: member="Korsel_BT.c::USART_BAUD_RATE" ref="ab54b68a1ee096155399ca2ee8bf5362e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USART_BAUD_RATE&nbsp;&nbsp;&nbsp;9600</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Debug Mode. </p>

</div>
</div>
<a class="anchor" id="af5d18045203a2499a4844f47cf2e193e"></a><!-- doxytag: member="Korsel_BT.c::V24_UBRR" ref="af5d18045203a2499a4844f47cf2e193e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define V24_UBRR&nbsp;&nbsp;&nbsp;(F_CPU/(USART_BAUD_RATE*8L)-1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculate and define UBRR. </p>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="ae89754a89c35713573eb2a2124fc4699"></a><!-- doxytag: member="Korsel_BT.c::V24COMMAND" ref="ae89754a89c35713573eb2a2124fc4699" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structV24Command.html">V24Command</a>  <a class="el" href="structV24Command.html">V24COMMAND</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Command struct consisting of header and data. </p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a341d33c536d663703208ab568f7d1e0e"></a><!-- doxytag: member="Korsel_BT.c::delay" ref="a341d33c536d663703208ab568f7d1e0e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void delay </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>delay of 100 ms </p>

</div>
</div>
<a class="anchor" id="a0a7500cb71e3070b5eefb6c66b4b0ede"></a><!-- doxytag: member="Korsel_BT.c::init_io" ref="a0a7500cb71e3070b5eefb6c66b4b0ede" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_io </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>initialize IO ports </p>

</div>
</div>
<a class="anchor" id="afea150fcd685610cb9f7672fce361e53"></a><!-- doxytag: member="Korsel_BT.c::ISR" ref="afea150fcd685610cb9f7672fce361e53" args="(INT0_vect)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ISR </td>
          <td>(</td>
          <td class="paramtype">INT0_vect&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ISR for photo sensor. </p>
<p>this ISR is called if the photo sensor state changes from white to black or from black to white </p>

</div>
</div>
<a class="anchor" id="a09ce999e15ad60b8a3f07d08af1946f9"></a><!-- doxytag: member="Korsel_BT.c::ISR" ref="a09ce999e15ad60b8a3f07d08af1946f9" args="(USART_RX_vect)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ISR </td>
          <td>(</td>
          <td class="paramtype">USART_RX_vect&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ISR for USART receive. </p>
<p>A command consists of two chars. The first one ist the header and the second one the speed value. The first time the ISR is called the char is read from the UDR. If a header was detected the headerDetected Flag is set. The next time the ISR is called the char read from UDR is a value for motor speed. </p>

</div>
</div>
<a class="anchor" id="a840291bc02cba5474a4cb46a9b9566fe"></a><!-- doxytag: member="Korsel_BT.c::main" ref="a840291bc02cba5474a4cb46a9b9566fe" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Main function. </p>
<p>Initializations and main loop </p>

</div>
</div>
<a class="anchor" id="ab742228d6d04b513d540ef5278e514f5"></a><!-- doxytag: member="Korsel_BT.c::pwm" ref="ab742228d6d04b513d540ef5278e514f5" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pwm </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize motor outputs as PWM (pulse width modulation). </p>

</div>
</div>
<a class="anchor" id="a2d6dfeece07c24153617ed94e3c41366"></a><!-- doxytag: member="Korsel_BT.c::setup_interrupt" ref="a2d6dfeece07c24153617ed94e3c41366" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup_interrupt </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize interrupts. </p>

</div>
</div>
<a class="anchor" id="aaad9fc771fb8f4348cd2f2a11e0399e9"></a><!-- doxytag: member="Korsel_BT.c::Stop_Motor" ref="aaad9fc771fb8f4348cd2f2a11e0399e9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Stop_Motor </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>If a contact button is pressed this method is called Resets motor speed to 0 and sends a "button pressed" command. </p>

</div>
</div>
<a class="anchor" id="af77d0bef7a9606d372dc7d621f3bce72"></a><!-- doxytag: member="Korsel_BT.c::USART_Init" ref="af77d0bef7a9606d372dc7d621f3bce72" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USART_Init </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize USART for serial communication. </p>
<p>no parity, 1 stop bit, char size 8 </p>

</div>
</div>
<a class="anchor" id="ab8c416106cf1aff4ccdb3da4860fc179"></a><!-- doxytag: member="Korsel_BT.c::USART_Transmit" ref="ab8c416106cf1aff4ccdb3da4860fc179" args="(unsigned char data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USART_Transmit </td>
          <td>(</td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>data</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Transmit a char on USART. </p>

</div>
</div>
<a class="anchor" id="a5dd3a8989f2fe0688e6690705d753f0e"></a><!-- doxytag: member="Korsel_BT.c::USART_Transmit_Command" ref="a5dd3a8989f2fe0688e6690705d753f0e" args="(V24COMMAND *command)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USART_Transmit_Command </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structV24Command.html">V24COMMAND</a> *&nbsp;</td>
          <td class="paramname"> <em>command</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Transmit a package consisting of a header and a value on USART. </p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ad28d914a812dcb1f811412562d752698"></a><!-- doxytag: member="Korsel_BT.c::LEFT_MOTOR_SPEED_BACKWARD_headerDetected" ref="ad28d914a812dcb1f811412562d752698" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="Korsel__BT_8c.html#ad28d914a812dcb1f811412562d752698">LEFT_MOTOR_SPEED_BACKWARD_headerDetected</a> = false</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>true if last package received was the protocol header LEFT_MOTOR_SPEED_BACKWARD </p>

</div>
</div>
<a class="anchor" id="a7432312cb69c802bd3e59006f0325c50"></a><!-- doxytag: member="Korsel_BT.c::LEFT_MOTOR_SPEED_FORWARD_headerDetected" ref="a7432312cb69c802bd3e59006f0325c50" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="Korsel__BT_8c.html#a7432312cb69c802bd3e59006f0325c50">LEFT_MOTOR_SPEED_FORWARD_headerDetected</a> = false</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>true if last package received was the protocol header LEFT_MOTOR_SPEED_FORWARD </p>

</div>
</div>
<a class="anchor" id="a971bcbb01204fee2d69c098b337f2da7"></a><!-- doxytag: member="Korsel_BT.c::RIGHT_MOTOR_SPEED_BACKWARD_headerDetected" ref="a971bcbb01204fee2d69c098b337f2da7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="Korsel__BT_8c.html#a971bcbb01204fee2d69c098b337f2da7">RIGHT_MOTOR_SPEED_BACKWARD_headerDetected</a> = false</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>true if last package received was the protocol header RIGHT_MOTOR_SPEED_BACKWARD </p>

</div>
</div>
<a class="anchor" id="a6dc3e377f49c2dea6f0f3e82020a798d"></a><!-- doxytag: member="Korsel_BT.c::RIGHT_MOTOR_SPEED_FORWARD_headerDetected" ref="a6dc3e377f49c2dea6f0f3e82020a798d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="Korsel__BT_8c.html#a6dc3e377f49c2dea6f0f3e82020a798d">RIGHT_MOTOR_SPEED_FORWARD_headerDetected</a> = false</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>true if last package received was the protocol header RIGHT_MOTOR_SPEED_FORWARD </p>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Fri Feb 25 2011 12:19:51 for Korsel ATTiny2313 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
